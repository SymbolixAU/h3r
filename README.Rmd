---
output: github_document
editor_options: 
  chunk_output_type: console
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# h3r

Interface to {h3lib}

R wrappers around Uber's H3 library. 

The wrappers are all vectorised, meaning each input can take a vector, and / or return a vector. 

e.g:

```r

```



## Design Choices

- There is no `h3` class, or nice printing, or any fancy sugar-coating of what's returned from the functions. I've kept the outputs as raw / primitive as possible
- All H3Indexes are returned as the String representation. If you want the `H3Index` / `uint64_t` type you need to use the C / C++ functions directly

## API

`inst/include/h3rapi.h`


## C API


An example package showing how to call the C API is in `/inst/capi`

{h3rc} is a demo package showing how to include the C code from {h3r} into another package.



---


## DESCRIPTION

Depend & Link to {h3r}

```
Depends:
  h3r
LinkingTo:
  h3r
```

## src/init.c

Define the functions you want to import from {h3r}

```
SEXP (*h3rLatLngToCell)(SEXP,SEXP,SEXP);

void R_init_h3rc(DllInfo *info)

{
  R_registerRoutines(info, NULL, callMethods, NULL, NULL);
  R_useDynamicSymbols(info, FALSE);

  /* Imports from h3r */
  h3rLatLngToCell = (SEXP(*)(SEXP,SEXP,SEXP)) R_GetCCallable("h3r", "h3rLatLngToCell");
}
```

## src/h3rc.c

Include the "h3rapi.h" header, then you can call the functions you've registered in `src/init.c`

```
#include "h3rapi.h"

SEXP h3rcLatLngToCell(SEXP lat, SEXP lng, SEXP res) {
  return h3rLatLngToCell(lat, lng, res);
}

```

## R/h3rr.R

Call the function you've defined in `h3rc.c` from within an R function

```
#' @export
ll2Cell <- function(lat, lon, res) {
  .Call(h3rcLatLngToCell, lat, lon, res)
}

```


## R/<somewhere.R>

Register your dynamic routines. If using Roxygen to build and document your pacakge you can specify

```
#' @useDynLib h3rc, .registration = TRUE
NULL
```

and it will be built and added to your NAMESPACE automatically



## C++ API

An example package showing how to call the C++ API is in `/inst/cppapi`




```{r}

library(sfheaders)
library(h3r)


cellToBoundary(cell = c("8cbe63562a54bff","8cbe635631103ff"))



```





